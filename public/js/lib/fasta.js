$(function(){!function(){window.WGST.exports.extractContigsFromFastaFileString=function(t){var n=[];return n=t.trim().split(">").filter(function(t){return t.length>0})},window.WGST.exports.splitContigIntoParts=function(t){var n=[];return n=t.split(/\n/).filter(function(t){return t.length>0}),n.map(function(t){return t.trim()}),n},window.WGST.exports.extractDnaStringIdFromContig=function(t){var n=window.WGST.exports.splitContigIntoParts(t),r=n[0].trim().replace(">","");return r},window.WGST.regex=WGST.regex||{},window.WGST.regex.DNA_SEQUENCE=/^[CTAGNUX]+$/i,window.WGST.exports.extractDnaStringFromContig=function(t){var n=window.WGST.exports.splitContigIntoParts(t),r=n.splice(1,n.length);WGST.regex.DNA_SEQUENCE.test(r[0].trim())||(r=r.splice(1,r.length));var e=r.join("").replace(/\s/g,"");return e},window.WGST.exports.extractDnaStringsFromContigs=function(t){var n,r=[];return t.forEach(function(t){n=window.WGST.exports.extractDnaStringFromContig(t),r.push(n)}),r},window.WGST.exports.isValidDnaString=function(t){return WGST.regex.DNA_SEQUENCE.test(t)},window.WGST.exports.isValidContig=function(t){var n=window.WGST.exports.splitContigIntoParts(t),r=window.WGST.exports.extractDnaStringFromContig(t);return n.length>1&&window.WGST.exports.isValidDnaString(r)},window.WGST.exports.calculateN50=function(t){for(var n=t.sort(function(t,n){return n.length-t.length}),r=[],e=0;e<n.length;e++)r.length>0?r.push(n[e].length+r[r.length-1]):r.push(n[e].length);for(var a=Math.floor(r[r.length-1]/2),i=0,o={},e=0;e<n.length;e++)if(i+=n[e].length,i>=a){o.sequenceNumber=e+1,o.sum=i,o.sequenceLength=n[e].length;break}return o},window.WGST.exports.calculateTotalNumberOfNucleotidesInDnaStrings=function(t){var n=0;return t.forEach(function(t){n+=t.length}),n},window.WGST.exports.calculateAverageNumberOfNucleotidesInDnaStrings=function(t){var n=window.WGST.exports.calculateTotalNumberOfNucleotidesInDnaStrings(t),r=t.length,e=Math.floor(n/r);return e},window.WGST.exports.calculateSmallestNumberOfNucleotidesInDnaStrings=function(t){var n=t.map(function(t){return t.length}),r=n.reduce(function(t,n){return Math.min(t,n)});return r},window.WGST.exports.calculateBiggestNumberOfNucleotidesInDnaStrings=function(t){var n=t.map(function(t){return t.length}),r=n.reduce(function(t,n){return Math.max(t,n)});return r},window.WGST.exports.calculateSumsOfNucleotidesInDnaStrings=function(t){var n=t.sort(function(t,n){return n.length-t.length}),r=[];return n.forEach(function(t){0===r.length?r.push(t.length):r.push(t.length+r[r.length-1])}),r},window.WGST.exports.validateContigs=function(t){var n={valid:[],invalid:[]};return t.forEach(function(t){var r=(window.WGST.exports.splitContigIntoParts(t),window.WGST.exports.extractDnaStringFromContig(t)),e=window.WGST.exports.extractDnaStringIdFromContig(t);window.WGST.exports.isValidContig(t)?n.valid.push({id:e,dnaString:r}):n.invalid.push({id:e,dnaString:r})}),n},window.WGST.exports.drawN50Chart=function(t,n,r){var e=460,a=312,i=(d3.extent(t,function(t){return t.sequenceLength}),d3.scale.linear().domain([0,t.length]).range([40,e-50])),o=d3.scale.linear().domain([t[t.length-1],0]).range([30,a-52]),s=d3.svg.axis().scale(i).orient("bottom").ticks(10),u=d3.svg.axis().scale(o).orient("left").ticks(10),c=d3.select(r).append("svg").attr("width",e).attr("height",a);c.append("g").attr("class","x axis").attr("transform","translate(20, 260)").call(s),c.append("g").attr("class","y axis").attr("transform","translate(60, 0)").call(u),c.select(".x.axis").append("text").text("Ordered contigs").attr("class","axis-label").attr("text-anchor","end").attr("x",e/2+49).attr("y",45),c.select(".y.axis").append("text").text("Nucleotides sum").attr("class","axis-label").attr("transform","rotate(-90)").attr("x",-(a/2)-44).attr("y",398),c.selectAll("circle").data(t).enter().append("circle").attr("cx",function(t,n){return i(n+1)+20}).attr("cy",function(t){return o(t)}).attr("r",5);var l=d3.svg.line().x(function(t,n){return i(n+1)+20}).y(function(t){return o(t)});c.append("path").attr("d",l(t));{var g=[{x:i(0)+20,y:o(0)},{x:i(1)+20,y:o(t[0])}],d=d3.svg.line().x(function(t){return t.x}).y(function(t){return t.y}).interpolate("linear"),p=(c.append("path").attr("d",d(g)),c.selectAll(".n50-circle").data([n]).enter().append("g").attr("class","n50-group"));p.append("circle").attr("cx",function(t){return i(t.sequenceNumber)+20}).attr("cy",function(t){return o(t.sum)}).attr("r",6)}p.append("text").attr("dx",function(t){return i(t.sequenceNumber)+20+9}).attr("dy",function(t){return o(t.sum)+5}).attr("text-anchor","right").text("N50");var x=[{x:54,y:o(n.sum)},{x:i(n.sequenceNumber)+20,y:o(n.sum)},{x:i(n.sequenceNumber)+20,y:a-46}],f=d3.svg.line().x(function(t){return t.x}).y(function(t){return t.y}).interpolate("linear");p.append("path").attr("d",f(x))}}()});