$(function(){!function(){var e=function(e,o){for(var a,n,s,g,r={},t=WGST.collection[e].assemblies,p=0;p<o.length;p++)a=o[p],n=t[a].ASSEMBLY_METADATA.geography.position.latitude,s=t[a].ASSEMBLY_METADATA.geography.position.longitude,g=new google.maps.LatLng(n,s),"undefined"==typeof r[g.toString()]&&(r[g.toString()]=[]),r[g.toString()].push(a);return console.log("[WGST] Grouped assemblies by position:"),console.dir(r),r},o=function(e,o,a,n){var s="//chart.apis.google.com/chart?chst=d_map_pin_letter&chld="+n+"|00FFFF|000000",g=new google.maps.LatLng(o,a),r=g.toString();WGST.geo.map.markers.group[r]={assemblyIds:e,marker:{}},WGST.geo.map.markers.group[r].marker=new google.maps.Marker({position:new google.maps.LatLng(o,a),map:WGST.geo.map.canvas,icon:s,optimized:!0}),google.maps.event.addListener(WGST.geo.map.markers.group[r].marker,"click",function(){1===WGST.geo.map.markers.group[r].assemblyIds.length&&openAssemblyPanel(WGST.geo.map.markers.group[r].assemblyIds[0])})},a=function(){var e,o,a=WGST.geo.map.markers.group;for(e in a)o=a[e].marker,o.setMap(null),delete WGST.geo.map.markers.group[e];$(".show-all-assemblies-on-map").prop("checked",!1)};window.WGST.exports.triggerMapMarkers=function(n,s){var g=new google.maps.LatLngBounds;if(a(),s.length>0){var r,t,p,i,m,l=e(n,s),c=WGST.collection[n].assemblies;for(r in l)t=l[r],p=t[0],i=c[p].ASSEMBLY_METADATA.geography.position.latitude,m=c[p].ASSEMBLY_METADATA.geography.position.longitude,o(t,i,m,t.length),g.extend(new google.maps.LatLng(i,m))}g.isEmpty()?(WGST.geo.map.canvas.setCenter(new google.maps.LatLng(48.6908333333,9.14055555556)),WGST.geo.map.canvas.setZoom(5)):(WGST.geo.map.canvas.panToBounds(g),WGST.geo.map.canvas.fitBounds(g))}}()});