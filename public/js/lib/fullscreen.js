$(function(){!function(){window.WGST.exports.mapFullscreenTypeToTemplateId={"collection-map":"collection-map-fullscreen","collection-data":"collection-data-fullscreen","collection-tree":"collection-tree-fullscreen","assembly-upload-progress":"assembly-upload-progress-fullscreen",assembly:"assembly-fullscreen"},window.WGST.exports.mapFullscreenIdToPanelType={"collection-map":"collection-map","collection-data":"collection-data","collection-tree":"collection-tree"},window.WGST.exports.createFullscreen=function(e,l){if(console.log("createFullscreen():"),console.log(e),console.dir(l),!($('.wgst-fullscreen[data-fullscreen-id="'+e+'"]').length>0)){if("undefined"==typeof l)return console.error("[WGST][Error] No template context were provided."),void 0;var n={containerName:"fullscreen",containerType:l.fullscreenType,containerId:e};if("assembly"===n.containerType){var t={assemblyUserId:"AAA"};n=window.WGST.exports.extendContainerOptions(n,t)}l.fullscreenLabel=window.WGST.exports.getContainerLabel(n),console.debug("templateContext.fullscreenType: "+l.fullscreenType);var o=window.WGST.exports.mapFullscreenTypeToTemplateId[l.fullscreenType];console.debug("fullscreenTemplateId: "+o),console.log($('.wgst-template[data-template-id="'+o+'"]').html());var s=$('.wgst-template[data-template-id="'+o+'"]').html(),a=Handlebars.compile(s),i=a(l);$(".wgst-workspace").prepend(i),window.WGST.exports.happenedCreateFullscreen({fullscreenId:e,fullscreenLabel:l.fullscreenLabel})}},window.WGST.exports.removeFullscreen=function(e){$('.wgst-fullscreen[data-fullscreen-id="'+e+'"]').remove(),window.WGST.exports.happenedRemoveFullscreen(e),"collection-map"===e&&window.WGST.geo.map.remove()},window.WGST.exports.showFullscreen=function(e){$('.wgst-fullscreen[data-fullscreen-id="'+e+'"]').removeClass("wgst--hide-this wgst--invisible-this"),window.WGST.exports.happenedShowFullscreen(e)},window.WGST.exports.hideFullscreen=function(e){$('.wgst-fullscreen[data-fullscreen-id="'+e+'"]').addClass("wgst--hide-this wgst--invisible-this"),window.WGST.exports.happenedHideFullscreen(e)},window.WGST.exports.isFullscreenExists=function(e){return $('.wgst-fullscreen[data-fullscreen-id="'+e+'"]').length>0?!0:!1},window.WGST.exports.toggleFullscreen=function(e){var l=$('.wgst-fullscreen[data-fullscreen-id="'+e+'"]');l.is(".wgst--hide-this, .wgst--invisible-this")?window.WGST.exports.showFullscreen(e):window.WGST.exports.hideFullscreen(e)},window.WGST.exports.bringFullscreenToFront=function(e){window.WGST.exports.bringContainerToFront("fullscreen",e)},window.WGST.exports.bringFullscreenToBack=function(e){$('.wgst-fullscreen[data-fullscreen-id="'+e+'"]').css("z-index","auto")},window.WGST.exports.bringFullscreenToPanel=function(e,l){if(0!==$('.wgst-fullscreen[data-fullscreen-id="'+e+'"]').length){var n=e.split("__")[0],t=e,o=e.split("__")[1],s=n,o=$("[data-collection-tree-content]").attr("data-collection-id"),a=$("[data-collection-tree-content]").attr("data-collection-tree-type");if(window.WGST.exports.createPanel(n,{panelId:t,panelType:n,collectionId:o}),"undefined"!=typeof l&&l(),"collection-data"===s){var i=$('.wgst-fullscreen[data-fullscreen-id="'+e+'"]').find(".wgst-panel-body"),r=$('.wgst-panel[data-panel-id="'+t+'"]');r.find(".wgst-panel-body").replaceWith(i.clone(!0)),r.find(".wgst-collection-controls").removeClass("wgst--hide-this")}else if("collection-map"===s)$('.wgst-panel[data-panel-id="'+t+'"]').find(".wgst-panel-body-container").append(window.WGST.geo.map.canvas.getDiv());else if("collection-tree"===s){var c=$('[data-fullscreen-type="collection-tree"]').find("[data-collection-tree-content]");$('.wgst-panel[data-panel-id="'+e+'"]').find(".wgst-panel-body-container").html("").append(c)}else if("assembly"===s){var i=$('[data-fullscreen-type="assembly"]');$('.wgst-panel[data-panel-id="'+e+'"]').find(".wgst-panel-body-container").html("").append(i.html())}else if("assembly-upload-progress"===s){var i=$('[data-fullscreen-type="assembly-upload-progress"]');$('.wgst-panel[data-panel-id="'+e+'"]').find(".wgst-panel-body-container").html("").append(i.html())}window.WGST.exports.removeFullscreen(e),window.WGST.exports.showPanel(t),"collection-map"===s?google.maps.event.trigger(window.WGST.geo.map.canvas,"resize"):"collection-tree"===n&&(window.WGST.collection[o].tree[a].canvas.resizeToContainer(),window.WGST.collection[o].tree[a].canvas.draw()),window.WGST.exports.bringPanelToFront(t),window.WGST.exports.happenedFullscreenToPanel(e)}},window.WGST.exports.bringPanelToFullscreen=function(e){var l=e.split("__")[0],n=e;if(!window.WGST.exports.isFullscreenExists(n)){window.WGST.exports.createFullscreen(n,{fullscreenType:l,fullscreenId:n});var t=$('.wgst-panel[data-panel-id="'+e+'"]').attr("data-panel-type"),o=$('.wgst-fullscreen[data-fullscreen-id="'+n+'"]');if("collection-data"===t){var s=$('.wgst-panel[data-panel-id="'+e+'"]').find(".wgst-panel-body");s.clone(!0).appendTo(o),o.find(".wgst-collection-controls").addClass("wgst--hide-this")}else if("collection-map"===t)$('.wgst-fullscreen[data-fullscreen-id="'+n+'"]').find(".wgst-map").replaceWith(window.WGST.geo.map.canvas.getDiv());else if("collection-tree"===t){var a=$('[data-panel-type="collection-tree"]').find("[data-collection-tree-content]");$('.wgst-fullscreen[data-fullscreen-id="'+n+'"]').html("").append(a)}else if("assembly"===t){var i=$('[data-panel-type="assembly"]').find(".wgst-panel-body-container");$('.wgst-fullscreen[data-fullscreen-id="'+n+'"]').html("").append(i.html())}else if("assembly-upload-progress"===t){var r=$('[data-panel-type="assembly-upload-progress"]').find(".wgst-panel-body-container");$('.wgst-fullscreen[data-fullscreen-id="'+n+'"]').html("").append(r.html())}if(window.WGST.exports.showFullscreen(n),"collection-map"===t)google.maps.event.trigger(window.WGST.geo.map.canvas,"resize");else if("collection-tree"===t){var c=$('[data-fullscreen-type="collection-tree"]'),d={width:c.outerWidth(),height:c.outerHeight()};console.log("fullscreenDimensions:"),console.dir(d);var p=c.find(".wgst-tree-controls"),w={width:p.outerWidth(),height:p.outerHeight()};console.log("treeControlsDimensions:"),console.dir(w);var u={width:d.width,height:d.height-w.height};console.log("canvasDimensions:"),console.dir(u),$('[data-fullscreen-type="collection-tree"]').find(".wgst-tree-content").width(u.width),$('[data-fullscreen-type="collection-tree"]').find(".wgst-tree-content").height(u.height);var f=$("[data-collection-tree-content]").attr("data-collection-id"),g=$("[data-collection-tree-content]").attr("data-collection-tree-type");window.WGST.collection[f].tree[g].canvas.resizeToContainer(),window.WGST.collection[f].tree[g].canvas.draw()}window.WGST.exports.removePanel(e),window.WGST.exports.happenedPanelToFullscreen(e)}}}()});