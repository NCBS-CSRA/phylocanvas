{% extends 'layout.html' %}

{% block head %}
  <!-- Client -->
  <link href="/css/app.css" rel="stylesheet" type="text/css">

  <style>
    .wgst-spinner {
      content: "";
      display: block;
      width: 0;
      height: 0;
      border: solid 8px;
      border-radius: 5em;
      border-color: #0099ff transparent #0099ff transparent;
      -webkit-animation: spin 1s linear infinite;
    }
    .wgst-spinner.hide-this {
        display: none;
    }
  </style>
{% endblock %}

{% block content %}

  <section class="wgst-page wgst-page__app hide-this">

    <div class="wgst-init">
      <!-- <img src="" class="wgst-logo"/> -->
      <!-- <div class="wgst-loading"></div> -->

      <div class="wgst-spinner-container">
        <div class="wgst-spinner-large"></div>
      </div>
      <div class="wgst-logo">Whole Genome Sequence Analysis (WGSA)</div>
      <div class="wgst-init-status">Initialising...</div>
      <!--           
      <div class="wgst-init-progress">
        <div class="wgst-init-progress-item wgst-init-progress-item__config">
          <span class="glyphicon glyphicon-record"></span>
          <small>Configure app</small>
        </div>
        <div class="wgst-init-progress-item wgst-init-progress-item__server">
          <span class="glyphicon glyphicon-record"></span>
          <small>Connect to server</small>
        </div>
      </div>
      -->
    </div><!-- /.wgst-init -->

    <div class="wgst-notification wgst-notification__error hide-this"></div>
    <div class="wgst-notification wgst-notification__warning hide-this"></div>
    <div class="wgst-alert hide-this"></div>

    {% include "partials/header.html" %}

    <div class="wgst-react-component wgst-react-component__workflow-question"></div>

    <div class="wgst-background"></div>

    <div class="wgst-ring" data-wgst-js="ring">
      <div class="wgst-ring-content">WGSA</div>
    </div>






























    <!-- Collection -->
    <div class="wgst-fullscreen wgst-fullscreen__collection" data-fullscreen-name="collection" data-fullscreen-id="collection">
    </div><!-- /.wgst-fullscreen__collection -->






    <!-- 
    
    Templates

    -->

    <!-- Collection tree -->
    <!-- 
    <div class="wgst-fullscreen wgst-fullscreen__collection-tree" data-fullscreen-name="collectionTree" data-fullscreen-id="collectionTree">
    </div>
    -->
    <!-- /.wgst-fullscreen__collection-tree -->

    








































    <!-- Map -->
    <div class="wgst-fullscreen wgst-fullscreen__map wgst-fullscreen--active wgst-fullscreen--visible" data-fullscreen-name="map" data-fullscreen-id="map">
      <div class="wgst-map"></div>
    </div><!-- /.wgst-fullscreen__map -->


    
  </section>

  {% include "partials/panels/assembly_panel.html" %}

  {% include "partials/panels/assembly_upload_navigation_panel.html" %}
  {% include "partials/panels/assembly_upload_analytics_panel.html" %}
  {% include "partials/panels/assembly_upload_metadata_panel.html" %}
  {% include "partials/panels/assembly_upload_progress_panel.html" %}

  {% include "partials/panels/collection_data_panel.html" %}
  {% include "partials/panels/collection_tree_panel.html" %}

  {% include "partials/panels/upload/assembly_analytics.html" %}
  {% include "partials/panels/upload/assembly_metadata_form.html" %}

{% endblock %}

{% block script %}
<script>
  'use strict';
  
  //
  // WGST namespace
  //
  window.WGST = window.WGST || {};
  window.WGST.exports = {};
  window.WGST.state = {
    panels: {}
  };

  {% if appConfig %}
  window.WGST.config = {{appConfig | safe}};
  {% endif %}

  //
  // /collection/new
  //
  {% if newCollection %}
    window.WGST.isNewCollection = true;
  {% else %}
    window.WGST.isNewCollection = false;
  {% endif %}

  //
  // If user requested collection, e.g.: /collection/<collection_id>
  //
  {% if requestedCollectionId %}
    window.WGST.requestedCollectionId = '{{requestedCollectionId}}';
  {% endif %}
</script>
<script src="/js/lib/unsorted.js"></script>
<script src="/js/lib/upload.js"></script>
<script src="/js/lib/panel.js"></script>
<script src="/js/lib/tree.js"></script>
<script src="/js/lib/map.js"></script>
<script src="/js/lib/fasta.js"></script>

<script src="/js/lib/collection_data_panel.js"></script>

<script src="/js/lib/assembly_upload_analytics_panel.js"></script>
<script src="/js/lib/assembly_upload_metadata_panel.js"></script>
<script src="/js/lib/assembly_upload_navigation_panel.js"></script>
<script src="/js/lib/assembly_upload_progress_panel.js"></script>

<script src="/js/lib/assembly.js"></script>
<script src="/js/lib/collection.js"></script>

<script src="/js/lib/navigation.js"></script>

<script src="/js/client.js"></script>
{% endblock %}