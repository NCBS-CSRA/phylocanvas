{% extends 'layout.html' %}

{% block head %}

  <link href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" rel="stylesheet" type="text/css">
  <link href="/css/app.css" rel="stylesheet" type="text/css">

  <style>
    .wgst-spinner {
      content: "";
      display: block;
      width: 0;
      height: 0;
      border: solid 8px;
      border-radius: 5em;
      border-color: #0099ff transparent #0099ff transparent;
      -webkit-animation: spin 1s linear infinite;
    }
  </style>
{% endblock %}

{% block content %}

  <section class="wgst-page wgst-page__app wgst--hide-this">

    {% include "partials/init.html" %}    
    {% include "partials/header.html" %}
    
    <div class="wgst-layout-container">
      {% include "partials/backgrounds/drag_and_drop.html" %}
      {% include "partials/sidebar.html" %}
      {% include "partials/backgrounds/uploading.html" %}
      {% include "partials/backgrounds/get_collection.html" %}
      <div class="wgst-workspace">
      </div>
    </div>

  </section>

  {% include "partials/fullscreens/collection_map_fullscreen.html" %}
  {% include "partials/fullscreens/collection_data_fullscreen.html" %}
  {% include "partials/fullscreens/collection_tree_fullscreen.html" %}
  {% include "partials/fullscreens/assembly_upload_progress_fullscreen.html" %}

  {% include "partials/panels/panel.html" %}

  {% include "partials/panels/body/collection_data.html" %}
  {% include "partials/panels/body/collection_data/tree_button.html" %}
  {% include "partials/panels/body/collection_tree.html" %}
  {% include "partials/panels/body/collection_map.html" %}
  {% include "partials/panels/body/assembly.html" %}
  {% include "partials/panels/body/assembly_upload/analytics.html" %}
  {% include "partials/panels/body/assembly_upload/analytics/assembly_analytics_item.html" %}
  {% include "partials/panels/body/assembly_upload/metadata.html" %}
  {% include "partials/panels/body/assembly_upload/metadata/assembly_metadata_form.html" %}
  {% include "partials/panels/body/assembly_upload/navigation.html" %}
  {% include "partials/panels/body/assembly_upload/progress.html" %}

  {% include "partials/panels/header/collection_data.html" %}
  {% include "partials/panels/header/collection_tree.html" %}
  {% include "partials/panels/header/collection_map.html" %}
  {% include "partials/panels/header/assembly.html" %}
  {% include "partials/panels/header/assembly_upload/analytics.html" %}
  {% include "partials/panels/header/assembly_upload/metadata.html" %}
  {% include "partials/panels/header/assembly_upload/navigation.html" %}
  {% include "partials/panels/header/assembly_upload/progress.html" %}

  {% include "partials/feedback_overlay.html" %}

  {% include "partials/hidable.html" %}

{% endblock %}

{% block script %}
<script>
  'use strict';
  
  //
  // WGST namespace
  //
  window.WGST = window.WGST || {};
  window.WGST.exports = {};
  window.WGST.state = {
    panels: {}
  };

  {% if appConfig %}
  window.WGST.config = {{appConfig | safe}};
  {% endif %}

  //
  // /collection/new
  //
  {% if newCollection %}
    window.WGST.isNewCollection = true;
  {% else %}
    window.WGST.isNewCollection = false;
  {% endif %}

  //
  // If user requested collection, e.g.: /collection/<collection_id>
  //
  {% if requestedCollectionId %}
    window.WGST.requestedCollectionId = '{{requestedCollectionId}}';
  {% endif %}
</script>

<script src="/js/lib/utils.js"></script>
<script src="/js/lib/background.js"></script>

<script src="/js/lib/unsorted.js"></script>
<script src="/js/lib/upload.js"></script>
<script src="/js/lib/panel.js"></script>
<script src="/js/lib/overlay.js"></script>
<script src="/js/lib/container.js"></script>
<script src="/js/lib/fullscreen.js"></script>
<script src="/js/lib/map.js"></script>
<script src="/js/lib/fasta.js"></script>
<script src="/js/lib/hidable.js"></script>

<script src="/js/lib/collection_data_panel.js"></script>
<script src="/js/lib/collection_tree_panel.js"></script>

<script src="/js/lib/assembly_upload_analytics_panel.js"></script>
<script src="/js/lib/assembly_upload_metadata_panel.js"></script>
<script src="/js/lib/assembly_upload_navigation_panel.js"></script>
<script src="/js/lib/assembly_upload_progress_panel.js"></script>

<script src="/js/lib/assembly.js"></script>
<script src="/js/lib/collection.js"></script>

<script src="/js/lib/navigation.js"></script>

<script src="/js/lib/feedback.js"></script>
<script src="/js/lib/subscribe.js"></script>

<script src="/js/lib/sidebar.js"></script>

<script src="/js/client.js"></script>

<script src="/js/lib/wgsa_mixpanel.js"></script>
{% endblock %}